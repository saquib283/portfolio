{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mdreh/Downloads/self-site/src/lib/db.ts"],"sourcesContent":["import mongoose from 'mongoose';\r\n\r\n/**\r\n * Global is used here to maintain a cached connection across hot reloads\r\n * in development. This prevents connections growing exponentially\r\n * during API Route usage.\r\n */\r\nlet cached = (global as any).mongoose;\r\n\r\nif (!cached) {\r\n    cached = (global as any).mongoose = { conn: null, promise: null };\r\n}\r\n\r\nasync function connectToDatabase() {\r\n    const MONGODB_URI = process.env.MONGODB_URI;\r\n\r\n    if (!MONGODB_URI) {\r\n        throw new Error(\r\n            'Please define the MONGODB_URI environment variable inside .env.local'\r\n        );\r\n    }\r\n\r\n    if (cached.conn) {\r\n        return cached.conn;\r\n    }\r\n\r\n    if (!cached.promise) {\r\n        const opts = {\r\n            bufferCommands: false,\r\n        };\r\n\r\n        cached.promise = mongoose.connect(MONGODB_URI, opts).then((mongoose) => {\r\n            return mongoose;\r\n        });\r\n    }\r\n    try {\r\n        cached.conn = await cached.promise;\r\n    } catch (e) {\r\n        cached.promise = null;\r\n        throw e;\r\n    }\r\n\r\n    return cached.conn;\r\n}\r\n\r\nexport default connectToDatabase;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA;;;;CAIC,GACD,IAAI,SAAS,yDAAgB,QAAQ;AAErC,IAAI,CAAC,QAAQ;IACT,SAAS,yDAAgB,QAAQ,GAAG;QAAE,MAAM;QAAM,SAAS;IAAK;AACpE;AAEA,eAAe;IACX,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW;IAE3C,IAAI,CAAC,aAAa;QACd,MAAM,IAAI,MACN;IAER;IAEA,IAAI,OAAO,IAAI,EAAE;QACb,OAAO,OAAO,IAAI;IACtB;IAEA,IAAI,CAAC,OAAO,OAAO,EAAE;QACjB,MAAM,OAAO;YACT,gBAAgB;QACpB;QAEA,OAAO,OAAO,GAAG,mKAAQ,CAAC,OAAO,CAAC,aAAa,MAAM,IAAI,CAAC,CAAC;YACvD,OAAO;QACX;IACJ;IACA,IAAI;QACA,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IACtC,EAAE,OAAO,GAAG;QACR,OAAO,OAAO,GAAG;QACjB,MAAM;IACV;IAEA,OAAO,OAAO,IAAI;AACtB;uCAEe"}},
    {"offset": {"line": 92, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mdreh/Downloads/self-site/src/models/Settings.ts"],"sourcesContent":["import mongoose, { Schema, Document, Model } from 'mongoose';\r\n\r\nexport interface ISettings extends Document {\r\n    hero: {\r\n        title: string;\r\n        subtitle: string;\r\n        ctaText: string;\r\n    };\r\n    about: {\r\n        title: string;\r\n        description: string;\r\n        skills: string[];\r\n    };\r\n    contact: {\r\n        email: string;\r\n        phone: string;\r\n        linkedin: string;\r\n        github: string;\r\n        resume?: string; // URL to resume\r\n        twitter?: string;\r\n    };\r\n}\r\n\r\nconst SettingsSchema: Schema = new Schema({\r\n    hero: {\r\n        title: { type: String, default: \"Designing the Digital Future\" },\r\n        subtitle: { type: String, default: \"I am a Full Stack Developer passionate about crafting intuitive web applications.\" },\r\n        ctaText: { type: String, default: \"View Projects\" },\r\n    },\r\n    about: {\r\n        title: { type: String, default: \"More than just code.\" },\r\n        description: { type: String, default: \"I bridge the gap between design and engineering.\" },\r\n        skills: { type: [String], default: [] },\r\n    },\r\n    contact: {\r\n        email: { type: String, default: \"\" },\r\n        phone: { type: String, default: \"\" },\r\n        linkedin: { type: String, default: \"\" },\r\n        github: { type: String, default: \"\" },\r\n        resume: { type: String, default: \"\" },\r\n        twitter: { type: String, default: \"\" },\r\n    }\r\n}, { timestamps: true });\r\n\r\nconst Settings: Model<ISettings> = mongoose.models.Settings || mongoose.model<ISettings>('Settings', SettingsSchema);\r\n\r\nexport default Settings;\r\n"],"names":[],"mappings":";;;;AAAA;;AAuBA,MAAM,iBAAyB,IAAI,kKAAM,CAAC;IACtC,MAAM;QACF,OAAO;YAAE,MAAM;YAAQ,SAAS;QAA+B;QAC/D,UAAU;YAAE,MAAM;YAAQ,SAAS;QAAoF;QACvH,SAAS;YAAE,MAAM;YAAQ,SAAS;QAAgB;IACtD;IACA,OAAO;QACH,OAAO;YAAE,MAAM;YAAQ,SAAS;QAAuB;QACvD,aAAa;YAAE,MAAM;YAAQ,SAAS;QAAmD;QACzF,QAAQ;YAAE,MAAM;gBAAC;aAAO;YAAE,SAAS,EAAE;QAAC;IAC1C;IACA,SAAS;QACL,OAAO;YAAE,MAAM;YAAQ,SAAS;QAAG;QACnC,OAAO;YAAE,MAAM;YAAQ,SAAS;QAAG;QACnC,UAAU;YAAE,MAAM;YAAQ,SAAS;QAAG;QACtC,QAAQ;YAAE,MAAM;YAAQ,SAAS;QAAG;QACpC,QAAQ;YAAE,MAAM;YAAQ,SAAS;QAAG;QACpC,SAAS;YAAE,MAAM;YAAQ,SAAS;QAAG;IACzC;AACJ,GAAG;IAAE,YAAY;AAAK;AAEtB,MAAM,WAA6B,mKAAQ,CAAC,MAAM,CAAC,QAAQ,IAAI,mKAAQ,CAAC,KAAK,CAAY,YAAY;uCAEtF"}},
    {"offset": {"line": 164, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mdreh/Downloads/self-site/src/models/Experience.ts"],"sourcesContent":["import mongoose, { Schema, Document, Model } from 'mongoose';\r\n\r\nexport interface IExperience extends Document {\r\n    company: string;\r\n    position: string;\r\n    startDate: Date;\r\n    endDate?: Date;\r\n    current: boolean;\r\n    description: string;\r\n    technologies: string[];\r\n}\r\n\r\nconst ExperienceSchema: Schema = new Schema({\r\n    company: { type: String, required: true },\r\n    position: { type: String, required: true },\r\n    startDate: { type: Date, required: true },\r\n    endDate: { type: Date },\r\n    current: { type: Boolean, default: false },\r\n    description: { type: String, required: true },\r\n    technologies: { type: [String], default: [] },\r\n}, { timestamps: true });\r\n\r\nconst Experience: Model<IExperience> = mongoose.models.Experience || mongoose.model<IExperience>('Experience', ExperienceSchema);\r\n\r\nexport default Experience;\r\n"],"names":[],"mappings":";;;;AAAA;;AAYA,MAAM,mBAA2B,IAAI,kKAAM,CAAC;IACxC,SAAS;QAAE,MAAM;QAAQ,UAAU;IAAK;IACxC,UAAU;QAAE,MAAM;QAAQ,UAAU;IAAK;IACzC,WAAW;QAAE,MAAM;QAAM,UAAU;IAAK;IACxC,SAAS;QAAE,MAAM;IAAK;IACtB,SAAS;QAAE,MAAM;QAAS,SAAS;IAAM;IACzC,aAAa;QAAE,MAAM;QAAQ,UAAU;IAAK;IAC5C,cAAc;QAAE,MAAM;YAAC;SAAO;QAAE,SAAS,EAAE;IAAC;AAChD,GAAG;IAAE,YAAY;AAAK;AAEtB,MAAM,aAAiC,mKAAQ,CAAC,MAAM,CAAC,UAAU,IAAI,mKAAQ,CAAC,KAAK,CAAc,cAAc;uCAEhG"}},
    {"offset": {"line": 209, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mdreh/Downloads/self-site/src/models/Project.ts"],"sourcesContent":["import mongoose, { Schema, Document, Model } from 'mongoose';\r\n\r\nexport interface IProject extends Document {\r\n    title: string;\r\n    description: string;\r\n    image: string;\r\n    tags: string[];\r\n    link?: string;\r\n    github?: string;\r\n    featured: boolean;\r\n    order: number;\r\n}\r\n\r\nconst ProjectSchema: Schema = new Schema({\r\n    title: { type: String, required: true },\r\n    description: { type: String, required: true },\r\n    image: { type: String, required: true },\r\n    tags: { type: [String], default: [] },\r\n    link: { type: String, required: true },\r\n    github: { type: String, default: \"\" },\r\n    likes: { type: Number, default: 0 },\r\n    views: { type: Number, default: 0 },\r\n    featured: { type: Boolean, default: false },\r\n    order: { type: Number, default: 0 },\r\n    content: { type: String }, // Optional case study content\r\n}, { timestamps: true });\r\n\r\n// Prevent overwrite on HMR\r\nconst Project: Model<IProject> = mongoose.models.Project || mongoose.model<IProject>('Project', ProjectSchema);\r\n\r\nexport default Project;\r\n"],"names":[],"mappings":";;;;AAAA;;AAaA,MAAM,gBAAwB,IAAI,kKAAM,CAAC;IACrC,OAAO;QAAE,MAAM;QAAQ,UAAU;IAAK;IACtC,aAAa;QAAE,MAAM;QAAQ,UAAU;IAAK;IAC5C,OAAO;QAAE,MAAM;QAAQ,UAAU;IAAK;IACtC,MAAM;QAAE,MAAM;YAAC;SAAO;QAAE,SAAS,EAAE;IAAC;IACpC,MAAM;QAAE,MAAM;QAAQ,UAAU;IAAK;IACrC,QAAQ;QAAE,MAAM;QAAQ,SAAS;IAAG;IACpC,OAAO;QAAE,MAAM;QAAQ,SAAS;IAAE;IAClC,OAAO;QAAE,MAAM;QAAQ,SAAS;IAAE;IAClC,UAAU;QAAE,MAAM;QAAS,SAAS;IAAM;IAC1C,OAAO;QAAE,MAAM;QAAQ,SAAS;IAAE;IAClC,SAAS;QAAE,MAAM;IAAO;AAC5B,GAAG;IAAE,YAAY;AAAK;AAEtB,2BAA2B;AAC3B,MAAM,UAA2B,mKAAQ,CAAC,MAAM,CAAC,OAAO,IAAI,mKAAQ,CAAC,KAAK,CAAW,WAAW;uCAEjF"}},
    {"offset": {"line": 271, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mdreh/Downloads/self-site/src/app/api/chat/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport { GoogleGenerativeAI } from '@google/generative-ai';\r\nimport connectToDatabase from '@/lib/db';\r\nimport Settings from '@/models/Settings';\r\nimport Experience from '@/models/Experience';\r\nimport Project from '@/models/Project';\r\n\r\nexport async function POST(req: NextRequest) {\r\n    try {\r\n        const apiKey = process.env.GEMINI_API_KEY;\r\n        if (!apiKey) {\r\n            return NextResponse.json({ error: 'GEMINI_API_KEY is not configured' }, { status: 500 });\r\n        }\r\n\r\n        const { message, history } = await req.json();\r\n\r\n        // 1. Fetch Context Data\r\n        await connectToDatabase();\r\n        const settings = await Settings.findOne({}).lean();\r\n        const experiences = await Experience.find({}).sort({ startDate: -1 }).lean();\r\n        const projects = await Project.find({}).lean();\r\n\r\n        // 2. Build System Prompt\r\n        const systemPrompt = `\r\n        You are an AI assistant for the portfolio website of ${settings?.hero?.title || 'the developer'}.\r\n        Your goal is to answer questions about the developer's skills, experience, and projects based strictly on the context provided below.\r\n        \r\n        Context:\r\n        - Bio: ${settings?.about?.description || 'N/A'}\r\n        - Skills: ${settings?.about?.skills?.join(', ') || 'N/A'}\r\n        - Contact: ${settings?.contact?.email || 'N/A'}, ${settings?.contact?.linkedin || 'N/A'}\r\n        \r\n        Experience:\r\n        ${experiences.map((exp: any) => `- ${exp.position} at ${exp.company} (${new Date(exp.startDate).getFullYear()} - ${exp.endDate ? new Date(exp.endDate).getFullYear() : 'Present'}): ${exp.description}`).join('\\n')}\r\n        \r\n        Projects:\r\n        ${projects.map((proj: any) => `- ${proj.title}: ${proj.description} (Tech: ${proj.tags.join(', ')})`).join('\\n')}\r\n        \r\n        Guidelines:\r\n        - Be friendly, professional, and concise.\r\n        - If you don't know the answer based on the context, say \"I don't have that information, but you can contact me directly!\"\r\n        - Do not hallucinate skills or experience not listed here.\r\n        - Act as if you are the developer's digital assistant.\r\n        `;\r\n\r\n        // 3. Call Gemini API\r\n        const genAI = new GoogleGenerativeAI(apiKey);\r\n        // Confirmed available model via script\r\n        const model = genAI.getGenerativeModel({ model: \"gemini-2.0-flash\" });\r\n\r\n        // Build a single prompt with history manually to avoid chat session issues\r\n        // (Stateless approach is often more robust for simple bots)\r\n        let promptHistory = \"\";\r\n        if (history && Array.isArray(history)) {\r\n            promptHistory = history.map((h: any) => `${h.role === 'user' ? 'User' : 'Assistant'}: ${h.parts[0].text}`).join('\\n');\r\n        }\r\n\r\n        const fullPrompt = `\r\n${systemPrompt}\r\n\r\nCurrent Conversation:\r\n${promptHistory}\r\nUser: ${message}\r\nAssistant:\r\n        `;\r\n\r\n        const result = await model.generateContent(fullPrompt);\r\n        const response = result.response;\r\n        const text = response.text();\r\n\r\n        return NextResponse.json({ reply: text });\r\n\r\n    } catch (error: any) {\r\n        console.error('Gemini API Error Full:', JSON.stringify(error, Object.getOwnPropertyNames(error)));\r\n        // Check for specific 404 details if available\r\n        if (error.status === 404) {\r\n            console.error('Gemini 404 Details:', error.statusText, error.errorDetails);\r\n        }\r\n        return NextResponse.json({ error: 'Failed to generate response' }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;AAEO,eAAe,KAAK,GAAgB;IACvC,IAAI;QACA,MAAM,SAAS,QAAQ,GAAG,CAAC,cAAc;QACzC,IAAI,CAAC,QAAQ;YACT,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAmC,GAAG;gBAAE,QAAQ;YAAI;QAC1F;QAEA,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,MAAM,IAAI,IAAI;QAE3C,wBAAwB;QACxB,MAAM,IAAA,6HAAiB;QACvB,MAAM,WAAW,MAAM,sIAAQ,CAAC,OAAO,CAAC,CAAC,GAAG,IAAI;QAChD,MAAM,cAAc,MAAM,wIAAU,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC;YAAE,WAAW,CAAC;QAAE,GAAG,IAAI;QAC1E,MAAM,WAAW,MAAM,qIAAO,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI;QAE5C,yBAAyB;QACzB,MAAM,eAAe,CAAC;6DAC+B,EAAE,UAAU,MAAM,SAAS,gBAAgB;;;;eAIzF,EAAE,UAAU,OAAO,eAAe,MAAM;kBACrC,EAAE,UAAU,OAAO,QAAQ,KAAK,SAAS,MAAM;mBAC9C,EAAE,UAAU,SAAS,SAAS,MAAM,EAAE,EAAE,UAAU,SAAS,YAAY,MAAM;;;QAGxF,EAAE,YAAY,GAAG,CAAC,CAAC,MAAa,CAAC,EAAE,EAAE,IAAI,QAAQ,CAAC,IAAI,EAAE,IAAI,OAAO,CAAC,EAAE,EAAE,IAAI,KAAK,IAAI,SAAS,EAAE,WAAW,GAAG,GAAG,EAAE,IAAI,OAAO,GAAG,IAAI,KAAK,IAAI,OAAO,EAAE,WAAW,KAAK,UAAU,GAAG,EAAE,IAAI,WAAW,EAAE,EAAE,IAAI,CAAC,MAAM;;;QAGpN,EAAE,SAAS,GAAG,CAAC,CAAC,OAAc,CAAC,EAAE,EAAE,KAAK,KAAK,CAAC,EAAE,EAAE,KAAK,WAAW,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM;;;;;;;QAOjH,CAAC;QAED,qBAAqB;QACrB,MAAM,QAAQ,IAAI,sLAAkB,CAAC;QACrC,uCAAuC;QACvC,MAAM,QAAQ,MAAM,kBAAkB,CAAC;YAAE,OAAO;QAAmB;QAEnE,2EAA2E;QAC3E,4DAA4D;QAC5D,IAAI,gBAAgB;QACpB,IAAI,WAAW,MAAM,OAAO,CAAC,UAAU;YACnC,gBAAgB,QAAQ,GAAG,CAAC,CAAC,IAAW,GAAG,EAAE,IAAI,KAAK,SAAS,SAAS,YAAY,EAAE,EAAE,EAAE,KAAK,CAAC,EAAE,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC;QACpH;QAEA,MAAM,aAAa,CAAC;AAC5B,EAAE,aAAa;;;AAGf,EAAE,cAAc;MACV,EAAE,QAAQ;;QAER,CAAC;QAED,MAAM,SAAS,MAAM,MAAM,eAAe,CAAC;QAC3C,MAAM,WAAW,OAAO,QAAQ;QAChC,MAAM,OAAO,SAAS,IAAI;QAE1B,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAK;IAE3C,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,0BAA0B,KAAK,SAAS,CAAC,OAAO,OAAO,mBAAmB,CAAC;QACzF,8CAA8C;QAC9C,IAAI,MAAM,MAAM,KAAK,KAAK;YACtB,QAAQ,KAAK,CAAC,uBAAuB,MAAM,UAAU,EAAE,MAAM,YAAY;QAC7E;QACA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA8B,GAAG;YAAE,QAAQ;QAAI;IACrF;AACJ"}}]
}